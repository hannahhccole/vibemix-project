<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeMix - AI Playlist Generator</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Auth Modal -->
    <div id="auth-modal" class="auth-modal">
        <div class="auth-modal-content">
            <h2 id="auth-title">Welcome to VibeMix</h2>
            <p class="auth-subtitle">Sign in to save your playlists</p>
            
            <div id="auth-form">
                <input type="email" id="auth-email" placeholder="Email" required>
                <input type="password" id="auth-password" placeholder="Password" required>
                <div id="auth-error" class="auth-error hidden"></div>
                
                <button id="login-btn" class="btn-primary">Log In</button>
                <button id="signup-btn" class="btn-secondary">Sign Up</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>ðŸŽµ VibeMix</h1>
                    <p class="tagline">Create playlists based on your mood</p>
                </div>
                <div class="header-right hidden" id="user-info">
                    <span id="user-email"></span>
                    <button id="logout-btn" class="btn-logout">Log Out</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Prompt Input Section -->
            <section class="prompt-section">
                <div class="input-container">
                    <label for="mood-prompt">What's your vibe?</label>
                    <textarea 
                        id="mood-prompt" 
                        placeholder="Describe your mood or the vibe you're looking for... (e.g., 'relaxing sunset music', 'upbeat workout songs', 'nostalgic 90s hits')"
                        rows="3"
                    ></textarea>
                    <button id="generate-btn" class="btn-primary">Generate Playlist</button>
                </div>
                <div id="loading" class="loading hidden">
                    <div class="spinner"></div>
                    <p>Creating your perfect playlist...</p>
                </div>
            </section>

            <!-- Generated Playlist Section -->
            <section class="playlist-section">
                <div class="playlist-header">
                    <h2>Your Playlist</h2>
                    <button id="save-playlist-btn" class="btn-secondary hidden">Save to Favorites</button>
                </div>
                <div id="playlist-container" class="playlist-container">
                    <p class="empty-state">Your generated playlist will appear here...</p>
                </div>
            </section>

            <!-- Favorites Section -->
            <section class="favorites-section">
                <h2>Saved Playlists</h2>
                <div id="favorites-container" class="favorites-container">
                    <p class="empty-state">No saved playlists yet. Generate and save your favorites!</p>
                </div>
            </section>
        </main>

        <!-- Audio Player Modal -->
        <div id="audio-player-modal" class="audio-player-modal hidden">
            <div class="audio-player-content">
                <div class="audio-player-header">
                    <div class="now-playing-info">
                        <h3 id="player-song-name">Song Name</h3>
                        <p id="player-artist">Artist Name</p>
                    </div>
                    <button id="close-player" class="btn-close">âœ•</button>
                </div>
                <div id="youtube-player-container" class="youtube-player-container"></div>
            </div>
        </div>
    </div>

    <!-- Templates -->
    <template id="song-template">
        <div class="song-item">
            <div class="song-info">
                <div class="song-number"></div>
                <div class="song-details">
                    <h3 class="song-name"></h3>
                    <p class="song-artist"></p>
                </div>
            </div>
            <div class="song-actions">
                <button class="btn-play">
                    <svg class="play-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg class="pause-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                    </svg>
                    Play
                </button>
                <a href="#" target="_blank" rel="noopener noreferrer" class="youtube-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                    YouTube
                </a>
                <button class="btn-remove-song hidden">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
        </div>
    </template>

    <template id="favorite-playlist-template">
        <div class="favorite-playlist">
            <div class="favorite-header">
                <div class="favorite-info">
                    <h3 class="favorite-title"></h3>
                    <p class="favorite-date"></p>
                </div>
                <div class="favorite-actions">
                    <button class="btn-expand">Show</button>
                    <button class="btn-edit">Edit</button>
                    <button class="btn-delete">Delete</button>
                </div>
            </div>
            <div class="favorite-songs hidden"></div>
        </div>
    </template>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyASADb4lnKaAuvDJU1ANwmWYMG7DBGU6mM",
            authDomain: "vibemix-240a4.firebaseapp.com",
            projectId: "vibemix-240a4",
            storageBucket: "vibemix-240a4.firebasestorage.app",
            messagingSenderId: "760332111016",
            appId: "1:760332111016:web:5f79b4bb56faa619ce069d"
        };

        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
    </script>

    <!-- Load YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
